let input: string = "";

// David's solution
input = `
309254625334097, 251732589486275, 442061964691135 @ -42, -22, -45
494902262649699, 448845738683125, 408766676225787 @ -345, -319, -201
281199817421623, 235413393248399, 236652333766125 @ 89, 152, -70
301725235583856, 281811429520812, 223751997566278 @ 22, 5, -17
254983415392239, 199364389205711, 220745292162981 @ 124, 195, 41
319770528385008, 160775078149393, 405878413934991 @ -52, 88, -34
213187568727062, 140359674811906, 348661762338130 @ 48, 79, 75
303019983748014, 237848886006558, 32933301083998 @ 70, 273, 705
317994280389969, 344752935430692, 216547286161837 @ 25, -307, -380
331109811422259, 119473803691477, 454356162362757 @ -65, 100, -28
315915978895640, 89108306713541, 120716339860602 @ -48, 164, 293
247846140486795, 360969864430419, 203660836188161 @ 76, -168, 151
340216189653487, 287940423843143, 173642108326069 @ -112, 41, 9
316371247012239, 296133619065496, 181455564576561 @ 67, 61, -272
242226592755463, 300231875585253, 180681681224883 @ 101, -63, 179
222906148763347, 323702037109251, 85127775828649 @ 129, -106, 355
292851259600379, 274288468518411, 150407696069441 @ 65, 44, 186
247912444513473, 326057703855393, 270919125599551 @ 52, -105, 81
307062198907749, 266573643474316, 120722749636938 @ 105, 239, 277
339390319644915, 387838308068515, 260490485275737 @ -119, -577, -633
307619047859327, 222767252750455, 177083775486095 @ 81, 472, -71
289693553125259, 303435443514951, 70654875805313 @ 185, -31, 582
259201165382195, 174406726631747, 31933933328057 @ 239, 498, 660
308494794117678, 174064939067795, 222734229484956 @ 16, 410, -79
267992351732864, 272448869478793, 309615129413127 @ 20, -32, 38
306790638798534, 263074874888599, 155972984590092 @ 110, 270, 23
425548013914880, 360604330484465, 298529391303688 @ -234, -172, -27
285790007397531, 201469069299291, 415723984086961 @ -14, 39, -39
265825093116041, 217266620650135, 410051855828948 @ 9, 22, -35
313611320557059, 122163439726915, 336416241294777 @ -40, 186, -16
340890657056834, 148398915342641, 344270287366381 @ -88, 300, -236
351740922309583, 389689434962459, 195177489919249 @ -111, -258, 124
394658804942547, 221857310837380, 350386082855634 @ -161, 51, -55
302288984344839, 300039868967071, 187096302444861 @ 41, -40, 42
334365717291803, 481040149089193, 332924862686985 @ -69, -293, 32
185510445176247, 110259376252594, 308985063816441 @ 179, 253, -24
404180358619365, 436565838977581, 341604134840520 @ -283, -456, -371
317891553840583, 167146186941855, 205897610987045 @ -31, 288, 70
340119630076557, 169677038822137, 408279947660538 @ -79, 136, -155
306334747918299, 277154072477491, 260049278596566 @ -9, -6, -25
153897072552845, 94559668987649, 322692264876360 @ 161, 192, 35
286321869992609, 499760615516228, 163718775555324 @ -15, -295, 245
317579641942083, 289620899832215, 180424190122337 @ 7, 36, -36
359339175031047, 260793187057513, 401112860374094 @ -101, -20, -65
352136974354188, 231624302390140, 194497485958641 @ -164, 295, -64
146452947646771, 320536980792115, 285824244785385 @ 143, -95, 107
314516053744183, 302945014492865, 177325130820993 @ 113, 17, -340
317593671098979, 295169125638931, 177097201079481 @ 54, 67, -224
436675027662465, 238366057576903, 359598723270165 @ -176, -8, 42
441350673372821, 371197331131723, 488943985209563 @ -268, -194, -387
303368114066359, 275726222031551, 325341213720261 @ -10, -13, -115
276976719937203, 477201840274003, 448472487903777 @ 31, -378, -290
285018088297029, 247677187793671, 345648522829081 @ 16, 28, -104
305226632596083, 286663841514115, 142839788338833 @ 7, -14, 227
349263452366232, 350871373444234, 551033029664437 @ -92, -143, -348
308191130907855, 248884018911391, 291198439183689 @ -38, -11, 92
262280428036051, 516838488050419, 136340762367881 @ 29, -365, 271
310378612723573, 304955313774575, 184608502104129 @ 6, -60, 68
345882848865110, 308943840476181, 281619441127675 @ -106, -76, -158
60742021140131, 143128242663503, 151392140331889 @ 243, 107, 258
254027855204853, 207935794045240, 319392022150713 @ 33, 47, 40
278684129575666, 346737682414156, 149531927631793 @ 188, -251, 144
253894103714731, 376753559901442, 187277421882636 @ 119, -239, 131
160701322459417, 192555244088349, 376168644376889 @ 104, 33, 40
314200070932634, 363952631428751, 483285469872981 @ -40, -162, -244
246282034237780, 481424338221318, 262787062052247 @ 44, -303, 110
335325241152231, 283273202771041, 168698295570263 @ -119, 289, -353
408678916349637, 368342341428405, 458930878530558 @ -179, -168, -205
305089280420769, 248363043869949, 337474886742980 @ -35, -12, 43
306256095478163, 273713089177641, 370455627854306 @ -33, -36, -29
305768404098944, 190744772237906, 131114511334921 @ -34, 63, 280
255484323642734, 88404008367241, 249240740842281 @ 18, 160, 152
320515872715834, 197284967214387, 184988767921687 @ -40, 186, 138
314001858318544, 204727129849436, 254500840752296 @ -22, 185, -47
255671595970701, 300379566235201, 203207254032711 @ 121, -56, 86
346976388015819, 162343428587923, 383535790295985 @ -95, 198, -206
221208084129595, 110369314471711, 303623841196957 @ 41, 109, 117
366167136296868, 309789702653524, 513119309558124 @ -154, -79, -707
190292262595425, 273232476251581, 294593118750015 @ 132, -31, 49
151642267032006, 274531727686198, 270096245913453 @ 138, -43, 124
314707634220907, 474568526841451, 197245589586537 @ -24, -491, 98
198719792867635, 286689594841341, 379712221346455 @ 63, -61, 43
332670074303373, 314330177918707, 155629980908685 @ -86, -110, -210
359558840675331, 381891529144654, 487872455587017 @ -113, -203, -328
210498053010529, 107558795743531, 291446830953431 @ 168, 310, -39
382128512977557, 186733911650527, 281493051153861 @ -168, 168, -34
322159033812407, 296343026391421, 165258143376645 @ -7, 19, -10
334734029842019, 283009640219247, 150471830153933 @ -85, 77, 117
380806802254275, 432648081517663, 319929100552146 @ -209, -434, -289
344398182649572, 246105164203726, 153289937736891 @ -114, 159, 166
346176568152063, 259233881142523, 322015781792889 @ -91, 6, -56
423812168068541, 479599490438921, 288381537763853 @ -262, -441, -66
334413104017361, 277728530824351, 140801010749811 @ -102, 304, 41
377217370232019, 374298215174791, 383976887717661 @ -121, -161, -27
179270862268999, 7343102444291, 63861379870541 @ 134, 314, 367
324718141355619, 345783704686819, 167606027591689 @ 25, -554, -402
260703305052767, 423068861734261, 429952272120063 @ 21, -221, -85
289952542844331, 304544218116805, 36482709781557 @ 43, -65, 510
358851618550404, 299937108009316, 245647388086548 @ -120, -61, 43
240758999852739, 292931383617961, 175693158996051 @ 87, -53, 199
314129317263569, 253215176044633, 144804324911957 @ 20, 211, 162
308118615848770, 342682890235422, 136263154656142 @ 186, -415, 97
300350157067281, 242714291534395, 153367110704826 @ 157, 418, 41
165440011046409, 409025315853286, 342176569923231 @ 105, -185, 66
340202577994909, 255080735601143, 349355056905297 @ -90, 72, -340
457380402293359, 291647060471971, 307005545773141 @ -210, -62, 79
248597715644736, 350131063966702, 102915057746226 @ 126, -173, 331
239858717632260, 142949027841707, 239703200350413 @ 34, 98, 164
230837694628559, 188824166554516, 338795461463856 @ 59, 67, 23
286663051350053, 256564459944001, 281572009303213 @ 66, 79, -186
298578638187379, 208798954347971, 393231216446201 @ -28, 32, -17
278734884009741, 287777650336537, 120304025221089 @ 212, 45, 284
560759727355179, 383426624023291, 528191715276041 @ -308, -161, -138
320529320677184, 366295913325272, 433756919130119 @ -40, -213, -450
289060895694534, 263416181963686, 299066723009076 @ 30, 25, -113
361058279719188, 237840401621578, 509010683393253 @ -156, 141, -892
218297796657334, 367428541036741, 28395258159546 @ 120, -176, 443
315648501539299, 232942168105051, 171209445097261 @ 83, 676, -213
286924713076609, 275632887545191, 257302030842231 @ 14, -20, 47
295440911784615, 316989300881243, 130577985059769 @ 208, -120, 200
327089829676864, 307942313977384, 124540136666902 @ -10, -23, 207
298302905462248, 247670442262067, 203554200945649 @ 24, 90, 64
288666753034839, 345558287974951, 261712687764125 @ 70, -191, -161
311467203990959, 254404902343643, 229605085506865 @ -15, 62, 12
155258476428174, 199675000669669, 269349014710596 @ 150, 52, 111
329419244924439, 321563374995331, 154382255000211 @ -59, -118, 167
267716721929613, 318657197640787, 161060907121407 @ 184, -110, 127
104931410609329, 351066485980921, 197049363790681 @ 164, -125, 216
237754683140019, 314961377106211, 352227681591321 @ 51, -89, 5
151572436243279, 124659069571591, 186032619384801 @ 236, 229, 182
225563485840935, 299270752971571, 250797748984281 @ 94, -66, 96
331601484578045, 313530366651863, 361904960566937 @ -66, -88, -200
409741405901659, 421603905145891, 317182430159481 @ -264, -362, -208
276840509255674, 309586876585750, 405169019487558 @ -10, -83, 5
196345197225345, 176645152015133, 307956514713829 @ 172, 153, -38
241466822261253, 319007776315859, 233521088360359 @ 46, -94, 153
280840881600224, 43502043827991, 154851756293501 @ 6, 294, 244
312771100785534, 159458653285891, 333315591467331 @ -42, 106, 26
313701051518187, 326731935817683, 343059416279345 @ -38, -108, -53
297211721073709, 309349087288541, 272815035001781 @ -12, -81, 54
331109811422259, 276772237632991, 427165889972981 @ -65, -47, -41
360272027433165, 129620392635517, 358402431508185 @ -98, 121, 24
333187079263887, 225895276089523, 397575976270449 @ -72, 206, -646
274893072828936, 338830170851455, 375755967809328 @ 12, -122, -57
259197371207451, 220796665583467, 398245618203057 @ 22, 25, -43
244978856767170, 238296197361766, 429888531806886 @ 22, -11, -19
328702050039133, 281683897156585, 79729780565531 @ -54, 55, 471
264287680881303, 254173664925203, 332326735307733 @ 22, -10, 17
375540160264491, 344345211178359, 290529370802217 @ -167, -159, -100
372507648979584, 213744181370142, 305153301056190 @ -140, 93, -43
321398764463854, 349150197337356, 192735436515581 @ -52, -135, 196
295316682186993, 252279956585185, 178608063233685 @ 52, 111, 98
438575138744741, 433375911682149, 356908782143427 @ -258, -303, -133
214091437385955, 275808693607963, 233239210976233 @ 193, -5, 42
212854383674047, 178256958321135, 401647668964403 @ 53, 48, 13
340169600497079, 386672567316091, 208797689483005 @ -120, -536, -255
474836419586715, 288592585646215, 485683572993117 @ -203, -63, -57
172039988490944, 242389587519056, 313920184758351 @ 164, 15, 14
349908009724554, 221062455269122, 189468228845802 @ -110, 133, 125
316838796687364, 340401290063821, 19857371518466 @ 18, -248, 867
312482121170809, 296686872640485, 184988316258007 @ 110, 63, -333
322981780218474, 224764283339413, 263255899471373 @ -50, 76, 28
288024022663911, 216629847747302, 239598550722420 @ 19, 101, 59
336030999715839, 301379708443321, 175385846564571 @ -91, -27, -7
294635736360411, 290763892178354, 320668825640681 @ 7, -43, -104
292686617024559, 480511270135951, 193234755761151 @ 5, -392, 159
330027090804942, 276456333096391, 184081032953418 @ -62, 14, 113
219423167133053, 329256045863873, 109680562535290 @ 189, -124, 315
333921017443755, 117636736183235, 510666849632689 @ -68, 122, -123
266920589871819, 442453778239991, 428282979457541 @ 19, -256, -110
323871453191539, 273609645030211, 218872893407801 @ -36, 70, -108
303914238968309, 299776925448871, 245499540972551 @ 50, -32, -243
295695332884638, 265773180762301, 200891591120949 @ -12, -16, 172
134085783852771, 64538704934839, 309874260035793 @ 163, 201, 74
308317170111142, 339751140614850, 331256558530111 @ -34, -123, 6
327788034308289, 531784309862311, 108069743955171 @ -60, -416, 311
267313938944679, 132911274153421, 447087470181441 @ 49, 235, -292
321791085157473, 335108147086615, 330894401555877 @ -46, -132, -138
236709822816825, 273059443407299, 144257294354146 @ 241, 42, 211
208230976028139, 195129466519243, 333755697433425 @ 70, 43, 59
322750816117371, 323344055942438, 192221158627962 @ -41, -117, 83
285550542328795, 250716583713447, 322238227841000 @ -9, -10, 45
353746363688069, 253691984449185, 163308179828701 @ -135, 96, 156
316754032755638, 281198687333588, 217353625664112 @ -16, 21, -43
323333169622647, 397514032595311, 444942054651141 @ -38, -381, -839
336153049218335, 282450278654031, 198238824763709 @ -96, 99, -197
334400908754214, 305056936757221, 143455965033561 @ -94, -20, 72
373736064771834, 477492087649516, 228616225290906 @ -134, -353, 117
289923741048972, 238516362200965, 269745790216404 @ 14, 56, 5
281274010597659, 229961978973811, 318802158619041 @ 5, 30, 14
386557327812789, 240465249032602, 412915048828536 @ -175, 57, -289
314197323454211, 296349144539907, 194022169125353 @ 6, -18, -23
324997731121467, 206094955101497, 109376294870959 @ -41, 332, 330
301463759049322, 275200694623734, 241239448795001 @ 12, 11, -24
371159067815691, 311636809967713, 493041748799217 @ -109, -85, -116
340643101775853, 268512298230833, 198160110888002 @ -107, 108, -57
365866579524393, 251054276774977, 225870176331907 @ -143, 52, 54
136828200261363, 44253366832387, 80484847929849 @ 292, 407, 365
345254522552865, 218585724972694, 559552129873854 @ -79, 7, -141
359521348078615, 228047191491646, 294627471238742 @ -181, 259, -425
378280011143387, 239111595774444, 317972399115044 @ -153, 51, -77
312523675409898, 276938068167076, 172056461276934 @ 42, 119, -15
344964095245093, 367964155631627, 309330763466212 @ -91, -190, -63
192877896972868, 401609193408355, 434391335882600 @ 84, -182, -45
295864660368200, 304829104051081, 212193654025443 @ 72, -56, -70
289455677409723, 139396502484259, 326305745359761 @ -14, 126, 41
308739522799233, 97503600673783, 457197515710701 @ -34, 212, -174
289024523573151, 280338891884341, 249873681110103 @ 33, -11, -11
466638355723921, 425021740095794, 524620708202067 @ -259, -247, -286
406992129599346, 489605762753494, 511498947326421 @ -146, -275, -124
219429111637891, 230934201267099, 300053138887950 @ 143, 66, -43
165202579340993, 295858127172353, 306521398134969 @ 104, -69, 104
306745789266923, 273436353196199, 287942071906661 @ -27, -25, 31
310641398994579, 340033174171747, 216283454949945 @ 40, -227, -208
56626824843375, 38064033761407, 127005107538221 @ 241, 220, 286
247214915404499, 358689213150059, 358184215147919 @ 95, -174, -162
259108789335738, 149635616831395, 447494297571768 @ 34, 138, -157
240823441489585, 354629650393656, 458521809365216 @ 53, -141, -149
254394413683230, 469630929996398, 202056701392208 @ 82, -387, 135
393722038528917, 430005616927975, 374793743044539 @ -194, -328, -233
245065249331628, 258406621721467, 387770275558722 @ 24, -30, 17
351367446945174, 403545605308306, 155013298870656 @ -128, -369, 181
314385126233838, 119018520302848, 543319927231215 @ -44, 157, -238
290652175484495, 198210223124871, 427623941603449 @ -19, 44, -56
338104979849695, 141665048755783, 275926019802065 @ -72, 85, 138
180218656940019, 291589915551091, 399698563663929 @ 115, -61, -40
343851002420625, 235429285350181, 338658856268787 @ -122, 259, -691
344485195643575, 288882879025655, 190570812804987 @ -91, -40, 155
218039513916268, 215629622478013, 412187879335223 @ 68, 28, -50
209089323026577, 265430198088493, 359659804793481 @ 137, -8, -104
218663217929914, 307474241686501, 349691967153491 @ 68, -80, 22
295462837241913, 149689275555573, 415093193466631 @ -14, 147, -129
172075730790801, 62290345234951, 36096196190010 @ 329, 534, 499
365383176895815, 150527474465299, 294854483535654 @ -109, 122, 69
297466807746883, 125855926174475, 263086058356489 @ 57, 591, -230
313796543895789, 260607217760881, 119958771688911 @ -47, -32, 294
479699196877051, 365758084050453, 367022694167273 @ -213, -139, 48
323800479702519, 304154824662071, 175291507101711 @ -11, -24, -127
271879020511391, 245146465165855, 467292497564613 @ -7, -20, -46
319818425568224, 338678513316772, 105130634321041 @ -30, -167, 336
326806224792556, 290280637343132, 196809421866862 @ -42, 33, -125
361903576914879, 215665096598125, 244052638697649 @ -195, 323, -236
316264213160889, 179761391446926, 195562088439791 @ -47, 75, 202
452252376886825, 560965952052439, 265246294089465 @ -223, -410, 104
307528797963186, 387253256256850, 161630226229821 @ 54, -463, 76
297180217106359, 239937688504265, 310076579125075 @ -15, 21, 13
319562196941244, 195531193599339, 414423846976466 @ -50, 66, -89
291329839680779, 158399629842056, 485005314612234 @ -25, 69, -73
302915121941193, 503644360156405, 466813826655453 @ -11, -452, -372
305014746007635, 245678415215317, 239268400035855 @ -17, 37, 73
254488414803898, 267558310399235, 297989915061305 @ 44, -22, 40
284532585020371, 271344089292467, 369731241045745 @ -13, -40, 15
319580562964409, 175810133630190, 214880762343021 @ -15, 507, -124
298363004769891, 280482438826514, 311787014656925 @ -17, -39, 12
305382209472669, 261091816441111, 362447293818186 @ -35, -26, 11
447293602650415, 377322054387847, 455276522401817 @ -178, -149, -32
162478994375659, 303382302022541, 363649526212781 @ 119, -76, 28
246799348037544, 203320927477705, 66442105166136 @ 270, 348, 501
190868122421219, 187604424684819, 31977675228261 @ 155, 110, 431
284076795980884, 288089852310776, 72130852226299 @ 60, -21, 418
177567582334382, 171033445144091, 253888107485433 @ 152, 114, 104
286346953429472, 266094997894946, 302154000625903 @ -12, -31, 78
215768896016186, 286410655272905, 247012355086138 @ 138, -40, 69
180964167389367, 178157400681221, 386814314615221 @ 97, 59, 6
256917387818903, 489963685478751, 261581286181835 @ 27, -306, 118
242757672405744, 172457142260051, 405378518404846 @ 46, 90, -65
252318679279531, 162496261333184, 166120839766540 @ 71, 173, 213
392057223618579, 348177815162755, 398861997647817 @ -195, -162, -303
425140720738493, 392009760607531, 492172144055336 @ -207, -206, -269
307923567328883, 188589792302627, 486339644934169 @ -39, 53, -117
270565871337846, 229427373783724, 316085591166432 @ -6, -5, 103
451698223527367, 428025753966369, 558489360189467 @ -183, -199, -135
434507292151769, 438503951410785, 233652258294624 @ -175, -220, 173
298963374747319, 244759969090961, 336071776222761 @ -19, 11, -16
297660538329848, 129028035535982, 232847445100762 @ -28, 117, 169
391397433722556, 240776041411366, 393635634384153 @ -128, -11, 8
452592468643219, 459844742220705, 320759259534558 @ -225, -280, 29
346302468831574, 293257466550936, 259719408440131 @ -154, 27, -534
154708137780310, 121372792748031, 406534364209037 @ 138, 134, -36
288800544967683, 70443995627995, 253189676471421 @ 7, 326, 66
331607693607552, 216953640764035, 317187949414281 @ -66, 106, -104
293397050024260, 284376041946605, 261616190981029 @ 18, -24, -20
163481750579484, 384756031164871, 354433622639456 @ 130, -170, 21
286960305824314, 236288783398386, 245667282389322 @ -10, 9, 137
191455683692235, 324831411205432, 264154671903495 @ 151, -105, 70
223350444012669, 223668567733236, 194479754741491 @ 169, 107, 130
333475754809246, 255903552193014, 118452594718314 @ -82, 321, 293
271816093086777, 291714092276473, 298587118516837 @ 46, -47, -42
314441212257651, 398668116024099, 243049569031641 @ -41, -210, 116
364567770333879, 414300606720991, 355000206970101 @ -162, -381, -391
311168184656456, 271994584702450, 161130402938615 @ 84, 217, -26
329117282954595, 297935144910755, 261829213046833 @ -59, -42, -137
155375671398963, 144520518037315, 218234365661241 @ 163, 132, 166
403482392131107, 331501743859275, 342907022499573 @ -149, -108, 35
196543530503478, 299154167737000, 222626876579925 @ 146, -65, 132
303052570345509, 396095249324391, 98083259420281 @ -20, -220, 328
320183252516479, 298108353214796, 245251439700091 @ -37, -49, -30
403103927901096, 175656798866446, 370521483793284 @ -136, 49, 47
244346787117643, 278038999310046, 402972734661104 @ 23, -51, 7
444819277663847, 465838895716609, 303712558147269 @ -223, -299, 38

200000000000000 400000000000000
`;

// Leandro's input
// input = `
// 156689809620606, 243565579389165, 455137247320393 @ -26, 48, -140
// 106355761063908, 459832650718033, 351953299411025 @ 73, -206, -52
// 271915251832336, 487490927073225, 398003502953444 @ 31, -414, -304
// 278301294493408, 210301684337526, 276412834430762 @ -17, 153, -28
// 262146623489507, 162285021125985, 434508319411402 @ -68, 186, -216
// 100360642160043, 324748831189633, 285310387662478 @ 22, -38, 46
// 249989001097453, 415885458390063, 425697561875793 @ -76, -168, -171
// 319458320561568, 367595915759329, 275829156406431 @ 63, -238, -146
// 429794796675064, 328384529255617, 215711742316663 @ -73, -550, -405
// 413337546220054, 234445965209569, 234239576989709 @ 74, 730, -514
// 368742109261588, 267620444542338, 316340249463068 @ -109, 71, -244
// 268647781982506, 383112233023575, 400207159189637 @ -16, -167, -242
// 245263233683248, 252096085447098, 159915544231253 @ 159, 97, 205
// 403291073829508, 443275906421913, 156181209827803 @ -139, -690, 265
// 308154327975660, 231305641310141, 258294531416871 @ -96, 103, 19
// 209794728221758, 220484733761233, 312338306684183 @ -79, 74, 11
// 265309364123188, 419259719328063, 225511001080898 @ -45, -208, 82
// 319619450789623, 406920163051583, 182788405844623 @ 56, -356, 147
// 198743674408618, 447013725548218, 117939714965973 @ 53, -247, 253
// 88481289227632, 69556849876541, 200096711415455 @ 311, 400, 119
// 108696964237362, 183408696970411, 191061667162741 @ 192, 167, 138
// 364737296389432, 239303453741988, 322482184320026 @ 135, 309, -666
// 341955559702516, 166871343289434, 67760236634117 @ 115, 543, 641
// 266171115365047, 297978061436516, 278849835472564 @ -28, -13, -14
// 413375292291708, 292483178038533, 194013097947443 @ 16, 9, 8
// 212721106837918, 249707113815633, 145225067403053 @ -83, 42, 193
// 294637499191078, 312990241314718, 253044038380483 @ 5, -49, -9
// 364183966657788, 328819836160359, 271073616014343 @ -47, -129, -165
// 303109082181288, 299695486454153, 438866705895623 @ -164, -13, -157
// 396150523676668, 275586277749250, 220343531946396 @ -37, 103, -84
// 374378435091408, 386792122158584, 540981395425303 @ -257, -109, -245
// 112408797824806, 264959570844624, 34608568824419 @ 21, 25, 311
// 424028184949024, 335200559583777, 184254750457223 @ 52, -720, 85
// 388712657017312, 367201040305929, 198532124867777 @ -113, -290, 84
// 418591554158320, 272935543247997, 139067813313899 @ 95, 318, 791
// 265753420275810, 309568698437536, 321627145788079 @ 205, -53, -269
// 102854370422120, 326998904436189, 306325775789383 @ 99, -48, -5
// 414597799520272, 339134748449869, 158143902771713 @ 119, -652, 470
// 305280203935258, 444469370589743, 526112889548643 @ -34, -329, -587
// 182846906714218, 328286110690383, 333339804664928 @ -15, -48, -32
// 363984789675778, 297108369481443, 206148862437557 @ 48, -21, 34
// 385478648002152, 288926853782307, 196204283537309 @ -5, 21, 68
// 234758963780434, 267566584128018, 173184750943619 @ 25, 39, 167
// 97711550595076, 49863213606372, 120113692829909 @ 139, 327, 237
// 91888229894624, 126278740579105, 292628555337223 @ 10, 158, 45
// 129408935324534, 268394705789377, 194547236523197 @ 61, 26, 137
// 361419580549573, 326562255386423, 175218423356134 @ 158, -196, 184
// 392911633872928, 176174913795903, 312375003367718 @ -81, 556, -476
// 213888654118856, 430480934069841, 314572710778519 @ 82, -252, -87
// 311006116330768, 277086752519625, 280766400121667 @ 163, 56, -216
// 192082888957288, 266531871165233, 240397581654423 @ 35, 34, 67
// 320909796012554, 220513709408708, 204860074098545 @ -123, 119, 113
// 381339315734722, 309150444632631, 198237407237537 @ 86, -105, 38
// 357850251702712, 417482985076677, 312286688739863 @ -243, -137, 15
// 309024118861408, 164403957518969, 446056828473799 @ -97, 220, -309
// 260716352452512, 309545271412985, 402377863270983 @ 31, -37, -285
// 410382583651168, 331248363921153, 226982304485543 @ -7, -347, -272
// 125717115148203, 170045104961773, 240810922950043 @ 150, 182, 63
// 205877674239277, 255986643942752, 343286853174898 @ -64, 37, -30
// 303584358649228, 294826486541013, 258686918121623 @ -31, -8, -13
// 286484894605537, 321948546875997, 409757026931663 @ -86, -50, -205
// 147274978335118, 261245767377453, 241688980302602 @ 213, 54, 42
// 264490962879095, 226600102582378, 150454728789965 @ -80, 89, 197
// 330111751645120, 110496261031409, 21845978243799 @ 35, 580, 661
// 336398029214047, 282537980706903, 236975890028153 @ -46, 24, 5
// 199822866602276, 245590350779068, 348889747963990 @ -5, 59, -72
// 421101710928918, 264843675351408, 204120342027628 @ -119, 243, -50
// 96911512499380, 17305159639557, 311397772955519 @ 180, 403, -39
// 114659827956819, 224289443155944, 342611287775244 @ -8, 63, -6
// 242038539419708, 240970054109423, 322529452857693 @ 61, 97, -122
// 282714363283548, 106022730229919, 138727238972509 @ 133, 533, 274
// 193432349326669, 152594385831607, 230962367949157 @ 32, 200, 81
// 352953940562168, 300454174505308, 217865069137403 @ -9, -29, 23
// 414205617749455, 387405045382980, 372003924636011 @ -188, -437, -729
// 384629437540537, 310943659317711, 222092246240312 @ -170, -52, 42
// 165350809002643, 274254004482983, 354270528247628 @ -22, 16, -40
// 296431600835212, 348340989329319, 189770240930210 @ -133, -80, 142
// 187506562392714, 359855617711207, 320176112672321 @ -15, -88, -19
// 157914221552573, 190746187796042, 274834256828403 @ -32, 103, 55
// 309279784710184, 317446350130590, 130188639955019 @ 135, -87, 327
// 429462707142176, 302861698640161, 199879988945287 @ -101, -130, -117
// 397395362682608, 219761015738333, 291401650774253 @ -105, 344, -370
// 36422600636476, 239084698474029, 403214648856671 @ 97, 52, -81
// 304603434775388, 271921542605833, 243919748497203 @ -14, 44, 10
// 334641414711048, 289734016455188, 235017024089278 @ -41, 5, 10
// 177382161347200, 301538528358423, 307134343081697 @ 15, -16, -11
// 425676757301291, 268684667159870, 217568324483971 @ -174, 191, -137
// 294449162405768, 298758883147777, 317081021988803 @ -87, -14, -70
// 90202256194174, 373361786704059, 412632154871207 @ 80, -99, -117
// 310741038124832, 424626690568737, 504317557467015 @ 12, -342, -678
// 390598582879864, 252262281165551, 197885559720283 @ 11, 253, 45
// 61623712000240, 166280498995569, 426090824997719 @ 34, 117, -82
// 382899469547813, 298164441904148, 258454815248483 @ -54, -25, -193
// 125780507751878, 134902105915193, 38777694704393 @ 10, 166, 308
// 340743334164960, 301852134055537, 247736158359895 @ 75, -37, -108
// 308340849886097, 322903323796554, 190187239130407 @ 106, -99, 123
// 364921340642548, 321445078390403, 209850435929053 @ 131, -164, -15
// 226449535762838, 347150986052873, 285939309525053 @ -56, -74, 20
// 314789685575048, 300826074108713, 494211396498783 @ -204, -13, -162
// 254861450357824, 305262566519889, 343451217005807 @ -101, -20, -46
// 368007925047000, 279155430225713, 211783651910903 @ 36, 64, 5
// 241915952139577, 336448011544226, 320697458979184 @ 14, -79, -86
// 325047016077512, 289422765941449, 236682011242719 @ -38, 5, 16
// 331937590710472, 351872367630828, 272973214173695 @ -169, -91, 19
// 412023890766148, 334456376692053, 262846898129093 @ -223, -140, -118
// 430546942574448, 267287295378793, 208897617574443 @ -69, 440, -326
// 400767940570744, 251667785662918, 244222534455858 @ -169, 149, -80
// 261315748840768, 256848580202433, 301625587111703 @ -67, 48, -22
// 454422391088248, 467442668649393, 494962391766155 @ -357, -446, -643
// 225303495317416, 455299951903299, 179076183319241 @ 55, -292, 157
// 270009802597504, 248239436449713, 361801365511447 @ -163, 39, -24
// 378259096711388, 218790077681315, 257533355061066 @ 123, 500, -366
// 38155313360940, 143952499079767, 204315811985991 @ 205, 193, 123
// 328494307888479, 163609915834197, 137701476327487 @ 174, 558, 339
// 164362036857716, 24117145841095, 196733794948255 @ 141, 451, 127
// 379788233760316, 274983304151817, 269810388128243 @ 136, 128, -480
// 91460550338287, 411332402491297, 403157837272712 @ 50, -134, -88
// 189563752548895, 359009910215700, 314641519716551 @ 30, -99, -37
// 386579722887298, 278593567591851, 169041058976381 @ 98, 105, 236
// 50405626947198, 322187041582088, 404738351264333 @ 97, -37, -91
// 299124020989133, 175245336039078, 214720353635159 @ -132, 159, 107
// 162830598929566, 160384819994385, 428255509649324 @ 37, 170, -172
// 81200978512408, 262042654777417, 444368592579071 @ 53, 28, -127
// 419113408030070, 402845501066987, 189547231914024 @ -111, -904, 78
// 231306044623918, 162295819256679, 314875947924212 @ 13, 208, -64
// 440112706500472, 407330300652729, 422063550208319 @ -328, -165, -184
// 115242087529577, 224614031338407, 324090288280157 @ 36, 72, -7
// 151235516031328, 303356863330033, 297567020641383 @ -25, -16, 31
// 168897614223950, 190021321517492, 312227678487871 @ -51, 101, 19
// 292731252859144, 289368574570197, 208477423634978 @ 71, 6, 80
// 377555425456564, 271870933386289, 209026830687715 @ -124, 62, 66
// 83155985579387, 263531634095809, 388933640858043 @ 46, 26, -65
// 343032299741956, 318431248964495, 230983780896061 @ 89, -107, -54
// 184266781937726, 180283451835589, 204376978183023 @ 97, 182, 115
// 271040751494070, 310921145403801, 214735872911077 @ 34, -42, 82
// 101201513495914, 270108966242383, 454187495896007 @ 26, 19, -133
// 150782392620907, 318738495424572, 371762009833394 @ 32, -37, -84
// 181905878706397, 259211603493867, 313649724115220 @ 14, 40, -22
// 173218562756396, 107406375257229, 324262724050959 @ -60, 183, 9
// 378128525959518, 415067113983733, 298057307496188 @ 13, -626, -448
// 264308913149146, 299753209106084, 271850139739155 @ 5, -17, -17
// 299200780795439, 266887754517301, 307681667660882 @ 34, 62, -166
// 327668457801889, 401274383179131, 171204666296426 @ 46, -352, 184
// 417675669598262, 293988050871539, 187587204146865 @ -36, -7, 78
// 307196808236827, 337134670606194, 283239492766536 @ -76, -87, -38
// 140351495202712, 36165385529451, 36243077321573 @ 99, 361, 360
// 297874498658238, 217254186857243, 281773329568803 @ -15, 160, -65
// 416300173715765, 329313742672659, 224213521028105 @ -168, -204, -91
// 318428607833323, 166301530781193, 483747171983453 @ -88, 242, -435
// 277368735645316, 426883526537333, 278618507743593 @ -19, -256, -30
// 225160923502940, 331985549863706, 222610739289022 @ -29, -59, 96
// 169702012274120, 302570287256753, 389347368403375 @ -18, -16, -86
// 379007729560472, 324179575229054, 237304102573018 @ -201, -67, 40
// 124919342783902, 17317876890399, 52825905702125 @ 120, 387, 336
// 197836361374600, 457243217638257, 402288908212439 @ -66, -184, -87
// 392008230819591, 243604408636991, 190092953341618 @ -144, 172, 120
// 374494435686633, 353632081477823, 354856277081962 @ -132, -176, -342
// 14039920486510, 107780750966967, 16612303297361 @ 316, 275, 402
// 203701452113788, 222470918009133, 250122562467683 @ -14, 89, 62
// 250723195450568, 284818030075853, 145341081712843 @ 73, 13, 228
// 204021961140431, 342247998363015, 84958594032993 @ -6, -72, 285
// 165363386594692, 436364399098395, 298145490301253 @ -39, -157, 30
// 407272340533868, 290061797217233, 211805541474203 @ 114, 38, -208
// 395038895643826, 327606285260517, 212071668967355 @ -114, -152, 17
// 240850477353248, 256299937088033, 236593268749703 @ 46, 64, 50
// 429475180792648, 308954515006173, 205369297165063 @ -55, -255, -261
// 173747442036868, 396944775480173, 262040796119273 @ 113, -176, 20
// 394985769479732, 282868365567250, 188433951287572 @ -5, 65, 102
// 372221896627712, 296473729515361, 233311134067079 @ 66, -20, -133
// 261287110515383, 434078809665773, 429627878988643 @ 70, -314, -393
// 312135362666596, 328081235869175, 293971950041710 @ -109, -64, -38
// 427126842659577, 261412026761233, 265790104657429 @ -98, 394, -899
// 377989523675174, 312819934270367, 186452906594155 @ 36, -109, 121
// 340994063515128, 283338210023069, 243069842207619 @ -107, 17, 18
// 233453495353144, 272037793624769, 337966238350340 @ -25, 26, -76
// 404518811627020, 304150597048453, 150946110707239 @ 134, -121, 483
// 420966148761052, 287638235593737, 189493851265925 @ -59, 62, 54
// 284418677985198, 379694534962742, 222908386759619 @ 73, -223, 47
// 27779669269128, 368125851731751, 424795350422220 @ 103, -84, -102
// 192374225932024, 296086991299513, 172742540090191 @ 242, -11, 172
// 138718849790112, 469079425195425, 255426552350599 @ -26, -183, 79
// 96034466212780, 217665710487860, 105403236362408 @ 155, 101, 260
// 301836160928548, 247331077186683, 325260642768278 @ 67, 124, -250
// 209218837721740, 307076337722779, 269718421913189 @ 5, -25, 26
// 413001405325853, 269418345794023, 214055078027948 @ -126, 148, -58
// 288699304787450, 213286894371946, 478993076746859 @ 37, 185, -553
// 166032540574064, 33209004095907, 228987724983495 @ 31, 336, 91
// 408484172522818, 237431539712133, 364070201454713 @ -182, 224, -594
// 129394139605081, 271957450031529, 203053582849028 @ 10, 18, 130
// 403607751193356, 350636795865179, 382486244987239 @ -191, -199, -533
// 218459838073920, 265511941192913, 226129290449719 @ 105, 49, 66
// 372897759141351, 364921567017014, 274041901454999 @ -224, -115, 11
// 122112965753177, 269621296613103, 357382335177332 @ 64, 24, -64
// 349323279928858, 156441118569537, 193317016557449 @ -122, 298, 126
// 214062681346900, 312068925754477, 274437001718289 @ 149, -44, -42
// 328751482552880, 424350543301265, 95169293677687 @ 109, -500, 477
// 365681273658393, 310062668651708, 298205794709753 @ -152, -43, -115
// 75536171186048, 281406682061203, 410294742639113 @ 79, 8, -103
// 227894018916632, 215209732257421, 183338280708161 @ 291, 220, 146
// 308821662096418, 288470441858583, 222494442410453 @ 44, 9, 38
// 396961689132520, 342816219583849, 199968926258079 @ -31, -308, 33
// 1233905048600, 27311338577997, 249096586339955 @ 109, 261, 86
// 39668243863771, 339276389912772, 166669266543644 @ 174, -63, 172
// 313018799688488, 327027269691793, 180204909018503 @ -63, -74, 155
// 423680804636396, 327144470637599, 196766862265649 @ -159, -265, 26
// 125147652212682, 91132895970140, 328278076840951 @ 45, 235, -21
// 116611372726262, 304054056569403, 370570787993181 @ 150, -21, -126
// 337171864245647, 350314541993526, 334147411286616 @ -180, -87, -66
// 326437224132902, 266877803417225, 136159734847403 @ 72, 86, 305
// 195725666594784, 151003927895895, 105444812488527 @ 79, 231, 279
// 159265107783646, 274856304195096, 248849419713494 @ 161, 27, 36
// 133297744989140, 369032601628027, 94200808436293 @ 9, -89, 250
// 240267360464436, 169208772994095, 241776960334423 @ -69, 156, 75
// 410708887981495, 380981024571300, 190697541266993 @ -98, -587, 85
// 324403083153786, 508476868994521, 220154186800413 @ -123, -382, 85
// 226334400714161, 520186991796744, 194681681688100 @ -48, -303, 136
// 33103026380212, 239544478468497, 384008778169763 @ 89, 50, -55
// 97474623057917, 115464939889331, 323986080597325 @ 66, 200, -11
// 379131497638652, 344263953756393, 450773310371111 @ -56, -216, -973
// 263712292377948, 405291973269313, 151456574473863 @ 70, -254, 219
// 185910350499572, 261800491827432, 275507488957209 @ -69, 27, 57
// 292283345986969, 210365287838262, 503338129510493 @ -84, 131, -375
// 235096813934710, 343642040070729, 317017032713717 @ -31, -78, -43
// 388012588989984, 277394194997729, 342538825370215 @ 39, 100, -888
// 76394666353683, 294906256541762, 313049340932202 @ 28, -7, 24
// 59385002790164, 376247870875709, 118630558389063 @ 166, -113, 235
// 372071330738683, 543469605834111, 334778584134776 @ -192, -492, -146
// 192011291183718, 480274751952783, 224295410641803 @ -83, -192, 111
// 383308854056363, 210387620641883, 362960595019885 @ -72, 344, -611
// 374638681556608, 455383711507253, 246925694813803 @ -73, -599, -90
// 369886846614108, 307500909686391, 193657219580227 @ 153, -93, 69
// 215945975368338, 316888799575043, 170881953883553 @ 34, -43, 170
// 284403797899283, 230155593332033, 338351307018438 @ 70, 154, -242
// 331488419686485, 329221052458164, 375872527445567 @ -210, -45, -61
// 314186712060901, 209093170759353, 214124511478295 @ 100, 274, 43
// 271592497707606, 556304028906576, 414662233827483 @ -143, -297, -105
// 329213516985008, 161640297744449, 278022543146999 @ 48, 428, -166
// 198700989746016, 272955422620129, 207958280982599 @ 172, 37, 98
// 121959330988318, 493788792364653, 313125854347373 @ -22, -200, 26
// 384289781496518, 283550105070933, 190163941158703 @ -12, 48, 103
// 356760382285690, 247235776325943, 269978259105581 @ -58, 139, -124
// 371745473953047, 311576100081969, 292203089115031 @ -134, -54, -149
// 388760858799262, 302931470052987, 218327145322109 @ -43, -52, -39
// 201048933702188, 220659316801223, 214242717237533 @ -99, 65, 122
// 29502088673968, 168782683799193, 178119750800009 @ 63, 114, 157
// 378909843368353, 406476813737805, 178377236342708 @ -152, -314, 160
// 6249333679713, 303172175944518, 284347120418968 @ 90, -15, 54
// 334063218802324, 161663329873311, 347897431504165 @ 107, 516, -507
// 255147209718300, 479794845045981, 156075949142295 @ 12, -345, 199
// 174598749582828, 281444448823378, 239570996810673 @ -53, 7, 93
// 376945215322495, 321998487931571, 236756161317265 @ 74, -172, -179
// 172676429956996, 328635267513819, 281027995480031 @ 65, -57, 7
// 201064049803193, 181023480421858, 322277394107003 @ -26, 137, -25
// 82597026174120, 158322128982245, 262126916589115 @ 165, 181, 42
// 249866689034032, 352263673790193, 163142471468567 @ -118, -71, 174
// 221776010069488, 124247459308273, 224984225339463 @ -76, 191, 103
// 329766335596196, 279715943434361, 158194441255507 @ -24, 32, 214
// 407886682740259, 287803091918502, 206549521629731 @ -26, 43, -57
// 308853286575173, 52364022847523, 107370543494178 @ -44, 508, 310
// 284793718046509, 83277454203611, 284000681452177 @ -16, 412, -51
// 280811252806124, 80141844983703, 439344200315389 @ -23, 399, -336
// 339075273283904, 143553659625855, 281980468828629 @ -129, 285, -42
// 400350458083378, 162159885007192, 268392970875862 @ -127, 593, -246
// 366703903730093, 259991838718108, 262877991832013 @ 28, 149, -223
// 330206705937962, 307749314854045, 226881584202375 @ -18, -44, 27
// 263109506409658, 272770599373687, 239678824709572 @ -7, 32, 48
// 166081581471648, 469174771222033, 413649455081083 @ 15, -226, -138
// 285484328585635, 396333387880465, 238813101834004 @ -10, -214, 36
// 314936217230688, 444153762708083, 139397025717233 @ 79, -481, 284
// 143355194521976, 411273247979383, 331123428966353 @ 115, -181, -70
// 82066632810091, 342553996741452, 142467171189125 @ 30, -55, 193
// 161809258741720, 231498850897091, 76508958745467 @ -13, 65, 273
// 252900117898264, 319487424799141, 189107603936871 @ 11, -52, 139
// 328698500329663, 548671057002033, 322244134670462 @ -152, -406, -68
// 320807349387784, 398436397543086, 314814134279600 @ -153, -159, -42
// 396453960513307, 266122085348135, 356498186903833 @ -16, 172, -975
// 423469669396786, 299200572355686, 197716512389156 @ 41, -93, -132
// 307242970918358, 334537677792251, 225417320113541 @ -32, -95, 56
// 419717193313458, 296072862502667, 209732570707985 @ 118, -43, -346
// 205500602126365, 310597443361554, 312256062882869 @ -34, -27, -11
// 141937674017284, 284108577604053, 341308177570547 @ 130, 9, -92
// 271536105183686, 207859823877329, 420704441356571 @ -158, 82, -91
// 166892827556383, 252243531510648, 348121669830233 @ 86, 57, -99
// 152456778719043, 226695231725058, 315321347183728 @ 70, 87, -32
// 288521094457888, 268309178389281, 341227311465095 @ -127, 28, -59
// 134875814314192, 221891997819393, 276890863795751 @ -34, 64, 61
// 67039776983543, 171875046838183, 454226429939878 @ 30, 112, -110
// 361696618056938, 380329991494773, 393098044943133 @ -231, -114, -111
// 281232116618524, 271203719844525, 254212495156841 @ -31, 36, 18
// 310065899573202, 139568739817735, 422530967260723 @ -123, 236, -225
// 70463767374120, 327364372746409, 447982475719111 @ 45, -40, -117
// 243082097478778, 282610919907063, 210936609126773 @ 186, 23, 76
// 314890592957617, 265924037399387, 284362118226095 @ -64, 52, -61
// 251194476324608, 255521965899373, 269502854640519 @ -57, 49, 27
// 235495523693628, 272107587625825, 270747108226005 @ -27, 26, 22
// 83345977033876, 296589115686102, 91205929368626 @ 67, -9, 254
// 245560182847816, 97194660352497, 154192375126089 @ 227, 546, 228
// 330323050303818, 242095415758101, 316337422299273 @ -162, 72, -50
// 415019799542257, 337302935787810, 248168691869846 @ -88, -349, -382
// 332093400642358, 273183926405235, 220894804744871 @ -22, 51, 43

// 200000000000000 400000000000000
// `;

// Example's input
// input = `
// 19, 13, 30 @ -2,  1, -2
// 18, 19, 22 @ -1, -1, -2
// 20, 25, 34 @ -2, -2, -4
// 12, 31, 28 @ -1, -2, -1
// 20, 19, 15 @  1, -5, -3

// 7 27
// `;

// For each pair of lines: check where they intersect is that point inside the rectangle

function* pairwise<T>(arr: T[]): IterableIterator<[T, T]> {
  for (let i = 0; i < arr.length - 1; i++) {
    for (let j = i + 1; j < arr.length; j++) {
      yield [arr[i], arr[j]];
    }
  }
}

type TravelingDot = {
  x: number;
  y: number;
  vx: number;
  vy: number;
};

type Point = {
  x: number;
  y: number;
};

/**
 * The selected TypeScript code is creating an object lineA that represents a line in a 2D space.
 * This line is defined by its slope (m) and y-intercept (c), following the standard line equation y = mx + c.
 * The slope m of the line is calculated as the ratio of the vertical velocity (vy) to the horizontal velocity
 *  (vx) of a point dotA. This is based on the concept that the slope of a line is the change in y
 * (vertical direction) per unit change in x (horizontal direction). In this case, the velocities are used as
 *  the changes in x and y.
 * The y-intercept c of the line is calculated using the formula dotA.y - (dotA.vy / dotA.vx) * dotA.x.
 * This formula is derived from the line equation y = mx + c, rearranged to solve for c. It essentially calculates
 *  the y value when x is zero, which is the definition of the y-intercept.
 * In summary, this code is creating a line that passes through the point dotA and has a direction defined by
 * the velocity of dotA.
 *
 */
function dotsIntersectAt(
  dotA: TravelingDot,
  dotB: TravelingDot
): Point | undefined {
  const lineA = {
    m: dotA.vy / dotA.vx,
    c: dotA.y - (dotA.vy / dotA.vx) * dotA.x,
  };
  // If direction is traveling away
  const lineB = {
    m: dotB.vy / dotB.vx,
    c: dotB.y - (dotB.vy / dotB.vx) * dotB.x,
  };
  return linesIntersectAt(lineA, lineB);
}

// y = mx + c
type Line = {
  m: number;
  c: number;
};

/*

The function linesIntersectAt in the provided TypeScript code is designed to calculate the intersection point of two lines. The lines are represented by the Line type, which includes two properties: m and c. These properties represent the slope and the y-intercept of a line in the form y = mx + c, respectively.

The function takes two arguments, lineA and lineB, both of type Line. It returns a Point object, which represents the x and y coordinates of the intersection point, or undefined if the lines do not intersect.

The function first checks if the slopes of the two lines are equal with if (lineA.m === lineB.m). If they are, it means the lines are parallel and do not intersect, so the function returns undefined.

If the lines are not parallel, the function calculates the x-coordinate of the intersection point with the formula (lineB.c - lineA.c) / (lineA.m - lineB.m). This formula is derived from setting the equations of the two lines equal to each other and solving for x.

Next, the function calculates the y-coordinate of the intersection point by substituting the calculated x into the equation of lineA with lineA.m * x + lineA.c.

Finally, the function returns a Point object with the calculated x and y coordinates of the intersection point.

y1 = m1x1 + c1
y2 = m2x2 + c2

m1x + c1 = m2x + c2
m1x - m2x = c2 - c1
x * (m1 - m2) = c2 - c1
x = 

y1 = m1(c2 - c1) / (m1 - m2) + c1
*/
function linesIntersectAt(lineA: Line, lineB: Line): Point | undefined {
  if (lineA.m === lineB.m) return undefined;
  const x = (lineB.c - lineA.c) / (lineA.m - lineB.m);
  const y = lineA.m * x + lineA.c;
  return { x, y };
}

// Dot A
// 19, 13, 30 @ -2,  1, -2
const dotA: TravelingDot = {
  x: 19,
  y: 13,
  vx: -2,
  vy: 1,
};
// Dot B
// 18, 19, 22 @ -1, -1, -2
const dotB: TravelingDot = {
  x: 18,
  y: 19,
  vx: -1,
  vy: -1,
};

// const [x, y] = dotsIntersectAt(dotA, dotB);
// console.log(`x: ${x}, y: ${y}`);

const [linesString, targetQuadrantString] = input.trim().split("\n\n");
const dots: TravelingDot[] = linesString.split("\n").map((line) => {
  const [positionString, velocityString] = line.split(" @ ");
  const [x, y, z] = positionString.split(", ").map(Number);
  const [vx, vy, vz] = velocityString.split(", ").map(Number);
  return { x, y, vx, vy };
});

const [targetLow, targetHigh] = targetQuadrantString.split(" ").map(Number);

let sum = 0;
for (const [dotA, dotB] of pairwise(dots)) {
  const intersection = dotsIntersectAt(dotA, dotB);
  if (!intersection) continue;
  if (intersection.x < dotA.x && dotA.vx >= 0) continue;
  if (intersection.x > dotA.x && dotA.vx <= 0) continue;
  if (intersection.x < dotB.x && dotB.vx >= 0) continue;
  if (intersection.x > dotB.x && dotB.vx <= 0) continue;
  const { x, y } = intersection;
  if (x >= targetLow && x <= targetHigh && y >= targetLow && y <= targetHigh) {
    // console.log("Found intersection!", dotA, dotB);
    // console.log(`x: ${x}, y: ${y}`);
    sum++;
  }
}

console.log(sum);
